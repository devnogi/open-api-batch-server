<!DOCTYPE html>
<html lang="ko" xml:lang="ko" xmlns:th="http://www.thymeleaf.org">
<body>
<th:block th:fragment="itemDetail(item)">
    <button id="popoverBtn" type="button" class="btn btn-primary">
        상세 보기
    </button>
    <div id="popoverContent" class="d-none">
        <div class="card mb-3">
            <div class="border-1">
                <p class="text-center" th:text="${item.itemDisplayName}"></p>
                <div class="position-relative border rounded p-4 mt-5 m-2">
                    <span class="position-absolute top-0 start-50 translate-middle-y bg-white px-2 text-muted small">아이템 속성</span>
                    <div th:each="option : ${item.itemOptions}">
                        <p th:if="${#lists.contains({'공격력', '크리티컬', '밸런스', '내구력', '부상률', '숙련', '아이템 보호', '피어싱 레벨', '남은 전용 해제 가능 횟수', '인챈트 불가능', '방어력', '보호', '마법 방어력', '마법 보호', '남은 거래 횟수', '내구도'}, option.optionType)}">
                            <span th:text="${option.optionType}"></span>
                            <span th:text="${option.optionSubType}"></span>
                            <span th:text="${option.optionValue}"></span>
                            <span th:text="${option.optionValue2}"></span>
                            <span th:text="${option.optionDesc}"></span>
                        </p>
                    </div>
                </div>
                <div class="position-relative border rounded p-4 mt-5 m-2">
                    <span class="position-absolute top-0 start-50 translate-middle-y bg-white px-2 text-muted small">인챈트</span>
                    <div th:each="option : ${item.itemOptions}">
                        <p th:if="${option.optionType == '인챈트'}">
                            <span th:text="${option.optionType}"></span>
                            <span th:text="${option.optionSubType}"></span>
                            <span th:text="${option.optionValue}"></span>
                            <span th:text="${option.optionValue2}"></span>
                            <span th:text="${option.optionDesc}"></span>
                        </p>
                    </div>
                </div>
                <div class="position-relative border rounded p-4 mt-5 m-2">
                    <span class="position-absolute top-0 start-50 translate-middle-y bg-white px-2 text-muted small">개조</span>
                    <div th:each="option : ${item.itemOptions}">
                        <p th:if="${#lists.contains({'일반 개조', '장인 개조', '특별 개조', '보석 개조'}, option.optionType)}">
                            <span th:text="${option.optionType}"></span>
                            <span th:text="${option.optionSubType}"></span>
                            <span th:text="${option.optionValue}"></span>
                            <span th:text="${option.optionValue2}"></span>
                            <span th:text="${option.optionDesc}"></span>
                        </p>
                    </div>
                </div>
                <div class="position-relative border rounded p-4 mt-5 m-2">
                    <span class="position-absolute top-0 start-50 translate-middle-y bg-white px-2 text-muted small">세공</span>
                    <div th:each="option : ${item.itemOptions}">
                        <p th:if="${#lists.contains({'세공 랭크', '세공 옵션'}, option.optionType)}">
                            <span th:text="${option.optionType}"></span>
                            <span th:text="${option.optionSubType}"></span>
                            <span th:text="${option.optionValue}"></span>
                            <span th:text="${option.optionValue2}"></span>
                            <span th:text="${option.optionDesc}"></span>
                        </p>
                    </div>
                </div>
                <div class="position-relative border rounded p-4 mt-5 m-2">
                    <span class="position-absolute top-0 start-50 translate-middle-y bg-white px-2 text-muted small">에르그</span>
                    <div th:each="option : ${item.itemOptions}">
                        <p th:if="${option.optionType == '에르그'}">
                            <span th:text="${option.optionType}"></span>
                            <span th:text="${option.optionSubType}"></span>
                            <span th:text="${option.optionValue}"></span>
                            <span th:text="${option.optionValue2}"></span>
                            <span th:text="${option.optionDesc}"></span>
                        </p>
                    </div>
                </div>
                <div class="position-relative border rounded p-4 mt-5 m-2">
                    <span class="position-absolute top-0 start-50 translate-middle-y bg-white px-2 text-muted small">세트아이템</span>
                    <div th:each="option : ${item.itemOptions}">
                        <p th:if="${option.optionType == '세트 효과'}">
                            <span th:text="${option.optionType}"></span>
                            <span th:text="${option.optionSubType}"></span>
                            <span th:text="${option.optionValue}"></span>
                            <span th:text="${option.optionValue2}"></span>
                            <span th:text="${option.optionDesc}"></span>
                        </p>
                    </div>
                </div>
                <div class="position-relative border rounded p-4 mt-5 m-2">
                    <span class="position-absolute top-0 start-50 translate-middle-y bg-white px-2 text-muted small">아이템 색상</span>
                    <div th:each="option : ${item.itemOptions}">
                        <p th:if="${option.optionType == '아이템 색상'}">
                            <span th:text="${option.optionType}"></span>
                            <span th:text="${option.optionSubType}"></span>
                            <span th:text="${option.optionValue}"></span>
                            <span th:text="${option.optionValue2}"></span>
                            <span th:text="${option.optionDesc}"></span>
                        </p>
                    </div>
                </div>
            </div>
            <div class="border-1"></div>
            <div class="border-1"></div>
        </div>
    </div>
    <script>
  document.addEventListener('DOMContentLoaded', function () {
    const content = document.querySelector('#popoverContent').innerHTML;

    const popover = new bootstrap.Popover(document.querySelector('#popoverBtn'), {
      content: content,
      html: true,
      trigger: 'hover',
      placement: 'right',
    });
  });
</script>
</th:block>

</body>
</html>